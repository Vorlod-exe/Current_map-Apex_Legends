<!DOCTYPE html>
<html>
    <head>
        <title>Current map - Apex Legends</title>

        <style>
            body {
            margin: auto;
            width: auto;
            height: auto;
            background-color: #23272a;
            font-family: "Helvetica";
            color: aliceblue;
            text-align: center;
            line-height: 3em;
            transform: translateY(30%);
            }
        </style>
    </head>

    <body onload="apexMap()">
        <h1>Current map - Apex Legends</h1>
        <hr width="50%"><br>

        <h1><p id="map"></p></h1>
        <i><p id="timer"></p></i>
	    <h3><p id="next"></p></h3>
        <hr width="5%">
        <small><p>Apex Legends : saison 8</p></small>

        <script>
            function apexMap() {
                var cycle = (new Date().getTime() / 60000) % 2220 + 420

		        var map1 = "Kings Canyon"
		        var map2 = "Olympus"

                var output
                var next

                if (cycle < 90) {
                    output = map1
                    residual = 90 - cycle
                    next = "Next map : " + map2 + " (1h30)"
                } else if (cycle < 180) {
                    output = map2
                    residual = 180 - cycle
                    next = "Next map : " + map1 + " (1h)"
                } else if (cycle < 240) {
                    output = map1
                    residual = 240 - cycle
                    next = "Next map : " + map2 + " (1h)"
                } else if (cycle < 300) {
                    output = map2
                    residual = 300 - cycle
                    next = "Next map : " + map1 + " (1h)"
                } else if (cycle < 360) {
                    output = map1
                    residual = 360 - cycle
                    next = "Next map : " + map2 + " (1h)"
                } else if (cycle < 420) {
                    output = map2
                    residual = 420 - cycle
                    next = "Next map : " + map1 + " (2h)"
                } else if (cycle < 540) {
                    output = map1
                    residual = 540 - cycle
                    next = "Next map : " + map2 + " (2h)"
                } else if (cycle < 660) {
                    output = map2
                    residual = 660 - cycle
                    next = "Next map : " + map1 + " (1h30)"
                } else if (cycle < 750) {
                    output = map1
                    residual = 750 - cycle
                    next = "Next map : " + map2 + " (1h30)"
                } else if (cycle < 840) {
                    output = map2
                    residual = 840 - cycle
                    next = "Next map : " + map1 + " (2h)"
                } else if (cycle < 960) {
                    output = map1
                    residual = 960 - cycle
                    next = "Next map : " + map2 + " (2h)"
                } else if (cycle < 1080) {
                    output = map2
                    residual = 1080 - cycle
                    next = "Next map : " + map1 + " (1h30)"
                } else if (cycle < 1170) {
                    output = map1
                    residual = 1170 - cycle
                    next = "Next map : " + map2 + " (1h30)"
                } else if (cycle < 1260) {
                    output = map2
                    residual = 1260 - cycle
                    next = "Next map : " + map1 + " (2h)"
                } else if (cycle < 1380) {
                    output = map1
                    residual = 1380 - cycle
                    next = "Next map : " + map2 + " (1h)"
                } else if (cycle < 1500) {
                    output = map2
                    residual = 1500 - cycle
                    next = "Next map : " + map1 + " (1h)"
                } else if (cycle < 1560) {
                    output = map1
                    residual = 1560 - cycle
                    next = "Next map : " + map2 + " (1h30)"
                } else if (cycle < 1620) {
                    output = map2
                    residual = 1620 - cycle
                    next = "Next map : " + map1 + " (1h30)"
                } else if (cycle < 1710) {
                    output = map1
                    residual = 1710 - cycle
                    next = "Next map : " + map2 + " (1h30)"
                } else if (cycle < 1800) {
                    output = map2
                    residual = 1800 - cycle
                    next = "Next map : " + map1 + " (1h30)"
                } else if (cycle < 1890) {
                    output = map1
                    residual = 1890 - cycle
                    next = "Next map : " + map2 + " (1h30)"
                } else if (cycle < 1980) {
                    output = map2
                    residual = 1980 - cycle
                    next = "Next map : " + map1 + " (2h)"
                } else if (cycle < 2100) {
                    output = map1
                    residual = 2100 - cycle
                    next = "Next map : " + map2 + " (2h)"
                } else {
                    output = map2
                    residual = 2220 - cycle
                    next = "Next map : " + map1 + " (1h30)"
                }

                if (residual >= 60){
                    hourResi = Math.trunc(residual) / 60
                    minResi = residual - (Math.trunc(hourResi) * 60)
                    if (hourResi >= 2){
                        if (Math.trunc(minResi) <= 1){
                            var timer = Math.trunc(hourResi) + " hours " + Math.trunc(minResi) +  " minute left"
                        } else {
                            var timer = Math.trunc(hourResi) + " hours " + Math.trunc(minResi) +  " minutes left"
                        }
                    } else {
                        if (Math.trunc(minResi) <= 1){
                            var timer = Math.trunc(hourResi) + " hour " + Math.trunc(minResi) +  " minute left"
                        } else {
                            var timer = Math.trunc(hourResi) + " hour " + Math.trunc(minResi) +  " minutes left"
                        }
                    }
                } else if (residual <= 1){
                        var timer = Math.trunc(residual) +  " minute left"
                } else {
                        var timer = Math.trunc(residual) +  " minutes left"
                }
                
                document.getElementById("map").innerHTML = output
                document.getElementById("timer").innerHTML = timer
                document.getElementById("next").innerHTML = next
            }
        </script>
    </body>
</html>
